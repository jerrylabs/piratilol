{
  "version": 3,
  "sources": ["../../build/js/data.js", "../../build/js/helperFunctions.js", "../../build/js/index.js"],
  "sourcesContent": ["export const claims = [\n  \"Mladým: víte, že dokážete rozhodnout volby?\",\n  \"Hnutí ano prostě chce žít v minulosti bez perspektivy.\",\n  \"Boj s korupcí, ne udávání lidí.\",\n  \"Investice do sportu a kultury jsou zárukou zdravé společnosti.\",\n  \"Potřebujeme obnovit rovnováhu přírody!\",\n  \"Byty je třeba stavět, ne danit.\",\n  \"Nejvyšší čas zastavit zadlužování naší země!\",\n  \"udělejme z česka sebevědomého spojence\",\n  \"Místo byrokratického pekla skutečná digitalizace\",\n  \"Staňme se digitálním tygrem!\",\n  \"Veřejné finance průhledně a čistě\",\n  \"Dítě potřebuje náruč jedné pečující osoby!\",\n  \"Politik má sloužit lidem a nutit stát, aby fungoval stejně\",\n  \"Podpořte finančně piráty a starosty\",\n  \"pojďme postavit ekonomiku na nohy\",\n  \"2 % z rozpočtu pro armádu vybojujeme!\",\n  \"kultura si zaslouží 1 % z rozpočtu\",\n  \"na šikaně živnostníků se podílet nebudeme\",\n  \"skutečně digitální stát, na co máme internet?\",\n  \"pojďme zreformovat školství. od základů.\",\n  \"finance řízené podle plánu\",\n  \"vraťme lesům jejich zdraví\",\n  \"1000 korun pro každého seniora z dotací Agrofertu. Ať si pan Babiš platí předvolební dárečky ze svého.\",\n  \"Máme už dost nekonečných korupčních kauz. Po volbách s nimi zatočíme.\",\n  \"Místo jednolitých polí pestrá krajina.\",\n  \"je čas vyrazit pomoci na jižní moravu!\",\n];\n\nexport const generators = [\n  { url: \"https://picsum.photos/800\", weight: 5 },\n  { url: \"https://source.unsplash.com/800x800\", weight: 10 },\n  { url: \"https://source.unsplash.com/800x800/?communism\", weight: 3 },\n  { url: \"https://source.unsplash.com/800x800/?cat\", weight: 1 },\n  { url: \"https://source.unsplash.com/800x800/?puppy\", weight: 1 },\n  { url: \"https://source.unsplash.com/800x800/?chicken\", weight: 1 },\n  { url: \"https://source.unsplash.com/800x800/?angry\", weight: 3 },\n];\n", "export const splitText = (text, maxLineLength) => {\n  const result = [];\n  while (text.length > maxLineLength) {\n    let pos = text.substring(0, maxLineLength).lastIndexOf(\" \");\n    pos = pos <= 0 ? maxLineLength : pos;\n    result.push(text.substring(0, pos));\n    let i = text.indexOf(\" \", pos) + 1;\n    if (i < pos || i > pos + maxLineLength) i = pos;\n    text = text.substring(i);\n  }\n  result.push(text);\n  return result;\n};\n\nexport const pickRandom = (arr) => arr[Math.floor(Math.random() * arr.length)];\n", "import { claims, generators } from \"./data.js\";\nimport { splitText, pickRandom } from \"./helperFunctions.js\";\n\nconst unrolledGenerators = generators.flatMap(({ url, weight }) => Array(weight).fill(url));\n\nconst imageReader = new FileReader();\nconst logo = new Image();\nlogo.src = \"public/logo.png\";\nlet currentImage = new Image();\nlet currentText = \"Test text\";\n\nconst rerollImage = async () => {\n  const imageData = await fetch(pickRandom(unrolledGenerators));\n\n  return new Promise((resolve) => {\n    const image = new Image();\n\n    image.addEventListener(\"load\", () => {\n      currentImage = image;\n      resolve();\n    });\n\n    image.crossOrigin = \"anonymous\";\n    image.src = imageData.url;\n  });\n};\n\nconst rerollText = () => {\n  currentText = pickRandom(claims);\n};\n\nconst canvas = document.getElementById(\"picture\");\nconst ctx = canvas.getContext(\"2d\");\nconst font = new FontFace(\"Bebas Neue\", \"url(public/BebasNeue-Bold.ttf)\");\n\nconst initFont = async () => {\n  await font.load();\n  document.fonts.add(font);\n};\n\nconst setFile = (file) => {\n  if (!file.type.startsWith(\"image/\")) {\n    return;\n  }\n\n  imageReader.readAsDataURL(file);\n};\n\ncanvas.addEventListener(\"dragover\", (e) => e.preventDefault());\n\ncanvas.addEventListener(\"drop\", (e) => {\n  e.preventDefault();\n  if (!e.dataTransfer || e.dataTransfer.files.length <= 0) {\n    return;\n  }\n\n  setFile(e.dataTransfer.files[0]);\n});\n\nconst repaintImage = async () => {\n  // clear to black (for transparent images)\n  ctx.fillStyle = \"black\";\n  ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n  // scale image to always fill the canvas\n  const scaleX = canvas.width / currentImage.width;\n  const scaleY = canvas.height / currentImage.height;\n  const scale = Math.max(scaleX, scaleY);\n  ctx.setTransform(scale, 0, 0, scale, 0, 0);\n  ctx.drawImage(currentImage, 0, 0);\n\n  ctx.setTransform(); // reset so that everything else is normal size\n  ctx.drawImage(logo, 525, 20);\n\n  const lines = splitText(currentText, 20).reverse();\n  const fontSize = lines.length < 5 ? 60 : 40;\n  ctx.font = `${fontSize}px 'Bebas Neue'`;\n  lines.forEach((line, index) => {\n    const x = 30;\n    const y = 685;\n    const padding = 15;\n    const lineHeight = padding + fontSize;\n    ctx.fillStyle = \"#f9dc4d\";\n    ctx.fillRect(x, y - (index * lineHeight), ctx.measureText(line).width + 2 * padding, lineHeight);\n    ctx.textBaseline = \"top\";\n    ctx.fillStyle = \"black\";\n    ctx.fillText(line, x + padding, y + padding - (index * lineHeight));\n  });\n\n  imageReader.addEventListener(\"load\", (e) => {\n    currentImage = new Image();\n    currentImage.addEventListener(\"load\", () => repaintImage());\n    currentImage.src = e.target.result;\n  });\n};\n\nconst buttonRandom = document.getElementById(\"randomize\");\nbuttonRandom.addEventListener(\"click\", async () => {\n  rerollText();\n  await rerollImage();\n  repaintImage();\n});\n\nconst buttonRandomImg = document.getElementById(\"randomize-img\");\nbuttonRandomImg.addEventListener(\"click\", async () => {\n  await rerollImage();\n  repaintImage();\n});\n\nconst buttonRandomText = document.getElementById(\"randomize-text\");\nbuttonRandomText.addEventListener(\"click\", () => {\n  rerollText();\n  repaintImage();\n});\n\nconst inputCustomImg = document.getElementById(\"customImage\");\ninputCustomImg.addEventListener(\"change\", (e) => {\n  e.preventDefault();\n  if (e.target.files.length <= 0) {\n    return;\n  }\n  setFile(e.target.files[0]);\n});\nconst buttonCustomImg = document.getElementById(\"customImageBtn\");\nbuttonCustomImg.addEventListener(\"click\", () => {\n  inputCustomImg.click();\n});\n\nconst inputCustom = document.getElementById(\"customText\");\nconst replaceWithCustomText = async (e) => {\n  if (e.type === \"input\" || inputCustom.value) {\n    currentText = inputCustom.value;\n    repaintImage();\n  }\n};\ninputCustom.addEventListener(\"click\", replaceWithCustomText);\ninputCustom.addEventListener(\"input\", replaceWithCustomText);\n\nconst downloadLinkReal = document.createElement(\"a\");\ndownloadLinkReal.setAttribute(\"download\", \"PirStanKampan.jpg\");\nconst linkSave = document.getElementById(\"save\");\nlinkSave.addEventListener(\"click\", (e) => {\n  e.preventDefault();\n  downloadLinkReal.setAttribute(\"href\", canvas.toDataURL(\"image/jpeg\").replace(\"image/jpeg\", \"image/octet-stream\"));\n  downloadLinkReal.click();\n});\n\ninitFont();\n\nrerollText();\nrerollImage()\n  .then(() => repaintImage());\n"],
  "mappings": "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",
  "names": []
}
